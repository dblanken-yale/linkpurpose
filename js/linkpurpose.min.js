class LinkPurpose{constructor(o){const e={domain:!(LinkPurpose.version="dev"),roots:"body",shadowComponents:!1,ignore:"",noRunIfPresent:!1,noRunIfAbsent:!1,baseSelector:"a[href]",baseLinkClass:"link-purpose",baseIconWrapperClass:"link-purpose-icon",noBreakClass:"link-purpose-nobreak",purposes:{externalLink:{selector:"[href^='/'], [href^='.'], [href^='#']",message:"(Link is external)",linkClass:"link-purpose-external",iconWrapperClass:"link-purpose-external-icon",iconType:"html",iconHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="currentColor" d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h240q17 0 28.5 11.5T480-800q0 17-11.5 28.5T440-760H200v560h560v-240q0-17 11.5-28.5T800-480q17 0 28.5 11.5T840-440v240q0 33-23.5 56.5T760-120H200Zm560-584L416-360q-11 11-28 11t-28-11q-11-11-11-28t11-28l344-344H600q-17 0-28.5-11.5T560-800q0-17 11.5-28.5T600-840h240v240q0 17-11.5 28.5T800-560q-17 0-28.5-11.5T760-600v-104Z"/></svg>',iconClasses:["fa-solid","fa-up-right-from-square"]},document:{selector:"[href$='.pdf'], [href*='.pdf?'], [href$='.doc'], [href$='.docx'], [href*='.doc?'], [href*='.docx?'], [href$='.ppt'], [href$='.pptx'], [href*='.ppt?'], [href*='.pptx?'], [href^='https://docs.google']",message:"(Link opens document)",linkClass:"link-purpose-document",iconWrapperClass:"link-purpose-document-icon",iconType:"html",iconHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="currentColor" d="M360-240h240q17 0 28.5-11.5T640-280q0-17-11.5-28.5T600-320H360q-17 0-28.5 11.5T320-280q0 17 11.5 28.5T360-240Zm0-160h240q17 0 28.5-11.5T640-440q0-17-11.5-28.5T600-480H360q-17 0-28.5 11.5T320-440q0 17 11.5 28.5T360-400ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h287q16 0 30.5 6t25.5 17l194 194q11 11 17 25.5t6 30.5v447q0 33-23.5 56.5T720-80H240Zm280-560v-160H240v640h480v-440H560q-17 0-28.5-11.5T520-640ZM240-800v200-200 640-640Z"/></svg>',iconClasses:["fa-regular","fa-file-lines"]},mailTo:{selector:'[href^="mailto:"]',message:"(Link sends Email)",linkClass:"link-purpose-mailto",iconWrapperClass:"link-purpose-mail-icon",iconType:"html",iconHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="currentColor" d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-280L160-640v400h640v-400L480-440Zm0-80 320-200H160l320 200ZM160-640v-80 480-400Z"></path></svg>',iconClasses:["fa-regular","fa-envelope"]},newWindow:{selector:'[target="_blank"]',message:"(Link opens in new window)",linkClass:"link-purpose-window",iconWrapperClass:"link-purpose-window-icon",iconType:"html",iconHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm640-480L501-453q-5 3-10.5 4.5T480-447q-5 0-10.5-1.5T459-453L160-640v400h640v-400ZM480-520l320-200H160l320 200ZM160-640v10-59 1-32 32-.5 58.5-10 400-400Z"/></svg>',iconClasses:["fa-regular","fa-window-restore"]}}};var s;s=()=>{if(LinkPurpose.options={...e,...o},"purposes"in o)for(const s in e.purposes)s in o.purposes?LinkPurpose.options.purposes[s]={...e.purposes[s],...o.purposes[s]}:LinkPurpose.options.purposes[s]=e.purposes[s];LinkPurpose.links=[],LinkPurpose.sortedLinks=[],LinkPurpose.ignore=LinkPurpose.options.ignore?`:not(${LinkPurpose.options.ignore}, ${LinkPurpose.options.baseLinkClass})`:`:not(${LinkPurpose.options.baseLinkClass})`,LinkPurpose.options.purposes.externalLink.selector&&(LinkPurpose.options.domain?LinkPurpose.options.purposes.externalLink.selector=`:not(${LinkPurpose.options.purposes.externalLink.selector}, ${LinkPurpose.options.domain}})`:LinkPurpose.options.purposes.externalLink.selector=`:not(${LinkPurpose.options.purposes.externalLink.selector})`),LinkPurpose.run()},"complete"===document.readyState?s():window.addEventListener("load",s),LinkPurpose.findLinks=function(){if(LinkPurpose.links=[],LinkPurpose.noRun=!(!LinkPurpose.options.noRunIfAbsent||null!==document.querySelector(`:is(${LinkPurpose.options.noRunIfAbsent})`)),!LinkPurpose.noRun&&LinkPurpose.options.noRunIfPresent&&(LinkPurpose.noRun=null!==document.querySelector(`:is(${LinkPurpose.options.noRunIfPresent})`)),!LinkPurpose.noRun){var s=LinkPurpose.options.shadowComponents?", "+LinkPurpose.options.shadowComponents:"";const n=`:is(${LinkPurpose.options.baseSelector}${s})`+LinkPurpose.options.ignore;s=document.querySelectorAll(LinkPurpose.options.roots);if(s&&(s.forEach(s=>{LinkPurpose.links=LinkPurpose.links.concat(Array.from(s.querySelectorAll(n)))}),LinkPurpose.options.shadowComponents)){var o,e=`:is(${LinkPurpose.options.allPurposes.selector})`+LinkPurpose.options.ignore;for(let s=LinkPurpose.links.length-1;0<=s;s--)LinkPurpose.links[s].matches(LinkPurpose.options.shadowComponents)&&("object"==typeof(o=LinkPurpose.links[s].shadowRoot?.querySelectorAll(e))&&0<o.length?LinkPurpose.links.splice(s,1,...o):(console.warn("Link Purpose: A specified shadow host has no shadowRoot."),LinkPurpose.links.splice(s,1)))}}},LinkPurpose.processLinks=function(){LinkPurpose.marks=[],LinkPurpose.links&&LinkPurpose.links.forEach(s=>{var o,e,n=[];let i=!1;for([o,e]of Object.entries(LinkPurpose.options.purposes))e.selector&&s.matches(""+e.selector)&&("newWindow"===o?i=!0:n.push(o));i&&n.push("newWindow"),0!==n.length&&LinkPurpose.marks.push({link:s,hits:n})})},LinkPurpose.markLinks=function(){LinkPurpose.marks&&LinkPurpose.marks.forEach(u=>{u.hits.forEach((i,p)=>{if(u.link.classList.add(LinkPurpose.options.baseLinkClass,LinkPurpose.options.purposes[i].linkClass),0===p){let s=u.link.lastChild,o=!1,e=u.link;for(;s;)if(s.lastChild)s=(e=s).lastChild;else{if("#text"!==s.nodeName||!e.lastElementChild||0!==s.textContent.trim().length)break;o=s,e=e.lastElementChild,s=e.lastChild}let n=u.link;var r;s&&"#text"===s.nodeName&&0<s.textContent.length&&null!==(t=(p=s.textContent).match(/\S+\s*$/g))&&((r=document.createElement("span")).classList.add(LinkPurpose.options.noBreakClass),r.textContent=t[0],o&&(r.append(o.textContent),o.textContent=""),s.textContent=p.substring(0,p.length-t[0].length),s.parentNode.append(r),n=r);const l=document.createElement("span");l.classList.add(LinkPurpose.options.baseIconWrapperClass,LinkPurpose.options.purposes[i].iconWrapperClass),"html"===LinkPurpose.options.purposes[i].iconType?l.innerHTML=LinkPurpose.options.purposes[i].iconHTML:"classes"===LinkPurpose.options.purposes[i].iconType&&LinkPurpose.options.purposes[i].iconClasses.forEach(s=>{l.classList.add(s)});p=document.createElement("span");p.classList.add("link-purpose-text"),p.textContent=LinkPurpose.options.purposes[i].message,l.append(p),n.append(l)}else{var t=u.link.querySelector(".link-purpose-text");t.classList.add(LinkPurpose.options.purposes[i].iconWrapperClass),t.textContent=t.textContent+LinkPurpose.options.purposes[i].message}})})},LinkPurpose.run=()=>{LinkPurpose.findLinks(),LinkPurpose.processLinks(),LinkPurpose.markLinks()}}}